{% extends "base.html" %}
{% block content %}
<br>
<h2>Hello  {{user.id_no}}  {{user.f_name}}  {{user.l_name}} {{user.course[0]}}</h2>
  {%for item in exams%}
      <table align="center">
	      <thead style="background-color:#72b8c6">
	      <tr>
			<th colspan=4></th>
		</tr>
	      </thead>
        <tr>
          <th>Module Name</th>
          <th>{{item.module_name[0]}}</th>
          <th>Module Code</th>
          <th>{{item.module_code}}</th>
        </tr>
        <tr>
          <th>Day</th>
          <th>{{item.exam_day[0]}}</th>
	  <th>
<form action="/calendarview"  method="post">
          <input type="image" src="{{url_for('static', filename='calendar.png')}}" alt="Submit" width="20" height="20" id="cal_icon">
          </form>
		  Date
	  </th>
          <th>{{item.exam_date[0]}}
	  </th>
        </tr>
        <tr>
          <th>Time</th>
          <th>{{item.time[0]}}</th>
          <th>Duration</th>
          <th>{{item.duration}}</th>
        </tr>
        <tr>
          <th>Venue</th>
	  <!--make the button an image and leave //{item.venue} with double brackets  -->
          <th>
          <!-- Trigger/Open The Modal -->
	  <button class="myBtn_multi" id = {{item.venue}}>{{item.venue}}</button>
                  <!-- The Modal -->
                 <div  class="modal modal_multi">
            <!-- Modal content -->
                <div class="modal-content">
                <span class="close close_multi">×</span>
		<div id="img_container">
<form action="/mapview"  method="post"> 
		<p>
		<!-- <button onclick="msg()">Call the function</button> -->
		<img src ='{{url_for("static", filename="%s.jpg" % item.venue)}}' width="95%">
		<input type="submit" class="button" value="Map view"> 
		</p>
		</form>
		</div>
            </div>
        </div>
        </div>
	  </th>
          <th>Seat Number</th>
          <th>
	  <!-- Trigger/Open The Modal -->
	  <button class="myBtn_multi" >{{item.seat_no[0]}} </button>
		 <!-- The Modal -->
	         <div  class="modal modal_multi">
	        <!-- Modal content -->
        	<div class="modal-content">
                <span class="close close_multi">×</span>
		<div class="seating" align="center" style="overflow:scroll">
		<h1>Front of exam hall</h1>
		{% for row in item.seat_matrix %}
		<div class="row" width="100%">
                        {% for value in row%}
                                <div class="column">
                                <img src="{{url_for('static', filename='%s' % value)}}" style="width:100%">
                                </div>
                        {% endfor %}
                        </div>
                {% endfor %}
            </div>
		</div>
        </div>
        </div>
	  </th>
        </tr>
        <tr>
          <th>Exam Percentage</th>
          <th>{{item.percent}}</th>
          <th>Lecturer notes</th>
          <th>{{item.lecturer_notes[0]}}</th>
        </tr>
	
      </table>
      {%endfor%}
      <br><br> 
      <script>
        // Get the modal
        var modalparent = document.getElementsByClassName("modal_multi");
        // Get the button that opens the modal
        var modal_btn_multi = document.getElementsByClassName("myBtn_multi");
        // Get the <span> element that closes the modal
        var span_close_multi = document.getElementsByClassName("close_multi");
        // When the user clicks the button, open the modal
        function setDataIndex() {
            for (i = 0; i < modal_btn_multi.length; i++)
            {
                modal_btn_multi[i].setAttribute('data-index', i);
                modalparent[i].setAttribute('data-index', i);
                span_close_multi[i].setAttribute('data-index', i);
            }
        }
        for (i = 0; i < modal_btn_multi.length; i++)
        {
            modal_btn_multi[i].onclick = function() {
                var ElementIndex = this.getAttribute('data-index');
                modalparent[ElementIndex].style.display = "block";
            };
            // When the user clicks on <span> (x), close the modal
            span_close_multi[i].onclick = function() {
                var ElementIndex = this.getAttribute('data-index');
                modalparent[ElementIndex].style.display = "none";
            };
        }
        window.onload = function() {
            setDataIndex();
        };
        window.onclick = function(event) {
            if (event.target === modalparent[event.target.getAttribute('data-index')]) {
                modalparent[event.target.getAttribute('data-index')].style.display = "none";
            }
        };
    </script>
{% endblock %}
